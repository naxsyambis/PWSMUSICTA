<!DOCTYPE html>
<html>
<head>
  <title>Music App</title>
  <link rel="stylesheet" href="/css/main.css">
  <script>
    // 1. Cek apakah pengguna sudah login (memiliki token)
    const token = localStorage.getItem('token');
    const adminToken = localStorage.getItem('adminToken');
    const apiKey = localStorage.getItem('apiKey');

    // 2. Jika tidak ada token sama sekali, lempar ke halaman login
    if (!token) {
      window.location.href = '/login.html';
    } 
    // 3. Jika pengguna adalah Admin (punya adminToken), arahkan ke dashboard admin
    // Hal ini mencegah Admin nyasar ke halaman Client
    else if (adminToken) {
      window.location.href = '/admin.html';
    }
    // 4. Jika pengguna adalah Client tapi tidak punya API Key, lempar ke login
    else if (!apiKey) {
      window.location.href = '/login.html';
    }
  </script>
</head>
<body>
<div class="container">
  <h2>Welcome to Music App</h2>
  <p id="status">Checking access...</p>

  <div id="search-section">
    <input type="text" id="term" placeholder="Cari lagu atau artis...">
    <button onclick="searchMusic()">Search Music</button>
    <ul id="result" class="song-list"></ul>
  </div>
  
  <br>
  <button onclick="handleLogout()" style="background-color: #ef4444;">Logout</button>
</div>

<script src="/js/landing.js"></script>
<script src="/js/client.js"></script>
</body>
</html>